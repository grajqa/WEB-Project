(()=>{var e={380:e=>{var o={config:{baseURL:"//qa-api-developer.sephora.com/v1/sot",debug:!1,allowTracking:!0,useSendBeacon:!0,apiKey:"JJZW6eiIX6W8s9Fm7vQ3v3pzj2flTOYm",cookieSetTimeout:100,MVPfields:{}},util:{readCookie:function(e){for(var o=e+"=",n=document.cookie.split(";"),t=0;t<n.length;t++){for(var i=n[t];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(o))return i.substring(o.length,i.length)}return null},setCookie:function(e,o,n){n||(n=15768e4),document.cookie=e+"="+o+"; Secure; path=/; domain=.sephora.com; max-age="+n},log:function(e){o.config.debug&&console.log(e)},xhrQueue:[]},setConfig:function(e,o){for(var n in e)e.hasOwnProperty(n)&&(this.config[n]=e[n]);o&&"function"==typeof o&&o()},commandQueue:function(){}};o.commandQueue.prototype={loadCmds:function(e){this.asyncCmds=e},push:function(e,n){var t=Array.prototype.slice.call(e,1),i="SephoraOneTagTracker",a=e[0];void 0===window[i]&&(o.util.log("Sephora One Tag :: Creating Tracker."),window[i]=new o.tracker),o.config.allowTracking?(t.push(n),window[i][a].apply(window[i],t)):o.util.log("Sephora One Tag :: Tracking is disabled")},process:function(){var e=this;this.asyncCmds&&this.asyncCmds.length>0&&this.push(this.asyncCmds.shift(),(function(){e.asyncCmds.length>0&&e.process()}))}},o.tracker=function(){},inactiveTime=function(){var e;function n(){o.util.log("No user activity for 20 mins.")}function t(){clearTimeout(e),e=setTimeout(n,12e5)}window.onload=t,document.onmousemove=t,document.onkeydown=t},window.onload=function(){inactiveTime()},o.tracker.prototype={screenResolution:function(){return window.screen.width+"x"+window.screen.height},viewportSize:function(){var e=new Object;return e.width=window.innerWidth?window.innerWidth:document.body.offsetWidth,e.height=window.innerHeight?window.innerHeight:document.body.offsetHeight,e.width+"x"+e.height},pagePerformance:function(){var e=window.performance.timing,o=e.loadEventEnd-e.navigationStart;return{dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,pageDownloadTime:e.responseEnd-e.responseStart,tcpConnectionTime:e.connectEnd-e.connectStart,serverResponseTime:e.responseStart-e.requestStart,domInteractiveTime:e.domInteractive-e.navigationStart,contentLoadTime:e.domContentLoadedEventEnd-e.navigationStart,pageLoadTime:o}},trackPageView:function(e,n,t){o.util.log("Sephora One Tag :: Tracking page view");var i=this,a={sysInfo:{screenResolution:this.screenResolution(),viewPortSize:this.viewportSize(),charSet:document.characterSet,colorDepth:window.screen.colorDepth,javaEnabled:navigator.javaEnabled()},pageInfo:{hostName:window.location.hostname,path:document.location.pathname,url:document.location.href},campaign:{referrer:document.referrer},sotVars:{sotType:"page view"},session:{},performance:{},apikey:o.config.apiKey},r=this.pagePerformance();for(var s in r)r.hasOwnProperty(s)&&(a.performance[s]=r[s]);for(var s in e)if(e.hasOwnProperty(s))if("object"!=typeof e[s]||Array.isArray(e[s])||null===e[s])a[s]=e[s];else for(var c in a[s]||(a[s]={}),e[s])null!==e[s][c]&&void 0!==e[s][c]&&""!==e[s][c]&&(a[s][c]=e[s][c]);this.checkAndCreateSotID((function(e){a.session||(a.session={}),a.session.sotTrackingId=o.util.readCookie("sti"),!a.session.sotTrackingId&&e&&(a.session.sotTrackingId=e),i.createOrExtendSessionID(e),a.session.sessionId=o.util.readCookie("ssi");var r=o.config.MVPfields.Page_View?o.config.MVPfields.Page_View:[];i.callTrackAPI(a,r,t),n&&"function"==typeof n&&n()}))},trackEvent:function(e,n,t,i=!1){o.util.log("Sephora One Tag :: Tracking event");var a=this,r={sysInfo:{screenResolution:this.screenResolution(),viewPortSize:this.viewportSize(),charSet:document.characterSet,colorDepth:window.screen.colorDepth,javaEnabled:navigator.javaEnabled()},pageInfo:{hostName:window.location.hostname,path:document.location.pathname,url:document.location.href},campaign:{referrer:document.referrer},sotVars:{sotType:e},session:{},apikey:o.config.apiKey};for(var s in n)if(n.hasOwnProperty(s))if("object"!=typeof n[s]||Array.isArray(n[s])||null===n[s])r[s]=n[s];else for(var c in r[s]||(r[s]={}),n[s])null!==n[s][c]&&void 0!==n[s][c]&&""!==n[s][c]&&(r[s][c]=n[s][c]);this.checkAndCreateSotID((function(n){r.session||(r.session={}),r.session.sotTrackingId=o.util.readCookie("sti"),!r.session.sotTrackingId&&n&&(r.session.sotTrackingId=n),a.createOrExtendSessionID(n),r.session.sessionId=o.util.readCookie("ssi");var s=String(e).replaceAll(" ","_"),c=o.config.MVPfields[s]?o.config.MVPfields[s]:[];a.callTrackAPI(r,c,i),t&&"function"==typeof t&&t()}))},validateMVPfields:function(e,o,n){var t=[],i=[],a=e.session&&e.session.sotTrackingId;return o&&o.length>0&&(o.forEach((o=>{var n=this.findKey(e,o);n&&t.push(n)})),o.forEach((e=>{-1===t.indexOf(e)&&i.push(e)}))),i.length>0?(this.makeSotErrorCall(e,`Missing Fields in payload: ${JSON.stringify(i)}`,n),!1):null!=a&&"null"!==a&&""!==a||(this.makeSotErrorCall(e,"Missing sotTrackingId in payload",n),!1)},findKey(e,o){for(var n in e){if(n==o)return o;if(e[n]instanceof Object&&(result=this.findKey(e[n],o),result))return result}},makeSotErrorCall:function(e,n,t){var i=new XMLHttpRequest;e.errorReason=n,e.error=!0,t&&(e.apikey=o.config.apiKey,delete e.performance,delete e.sotProps,delete e.error),i.open("POST",o.config.baseURL+"/evtError?apikey="+o.config.apiKey,!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Authorization","Bearer "+o.config.apiKey),i.withCredentials=!0,i.send(JSON.stringify(e))},makeXHRCall:function(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var t,i,a=n.status;0===a||a>=200&&a<400?(t=n.response,o.util.log("Sephora One Tag :: Setup of sotTrackingId(sti) cookie successfull! :: "+t)):o.util.log("Sephone One Tag :: Setup of sotTrackingId(sti) cookie failed."),t&&(t=JSON.parse(t)),t&&t.trackingId&&(i=t.trackingId,sessionStorage.setItem("sti",i)),setTimeout(function(n){e(n);for(var t=1;t<o.util.xhrQueue.length;t++)o.util.xhrQueue[t](n);o.util.xhrQueue=[],o.util.log("Sephora One Tag :: Making callback for checkAndCreateSotId :: timeout :: "+o.config.cookieSetTimeout+" :: trackingId in response is :: "+n)}(i),o.config.cookieSetTimeout)}},n.open("GET",o.config.baseURL+"/trackingId?apikey="+o.config.apiKey),n.withCredentials=!0,n.send()},checkAndCreateSotID:function(e){var n=o.util.readCookie("sti");n?sessionStorage.setItem("sti",n):(n=sessionStorage.getItem("sti"))&&o.util.setCookie("sti",n),n?(o.util.log("Sephora One Tag :: sotTrackingId(sti) found :: "+n),e(n)):(o.util.log("Sephora One Tag :: sotTrackingId not found"),e&&o.util.xhrQueue.push(e),o.util.xhrQueue.length<=1?(o.util.log("Sephora One Tag :: makeXhrcall"),this.makeXHRCall(e)):o.util.log("Sephora One Tag :: queue makeXhrcall callback"))},createOrExtendSessionID:function(e){var n=o.util.readCookie("ssi");if(n)o.util.log("Sephora One Tag :: sotSessionId(ssi) found :: "+n),o.util.log("Sephora One Tag :: Extend sotSessionId"),o.util.setCookie("ssi",n,1800);else{var t=o.util.readCookie("sti");t||(t=e);var i=t+"."+(new Date).getTime();o.util.log("Sephora One Tag :: sotSessionId not found"),o.util.log("Sephora One Tag :: Create sotSessionId"),o.util.setCookie("ssi",i,1800)}},callTrackAPI:function(e,n,t){if(this.validateMVPfields(e,n,t)){for(var i in e)null!==e[i]&&void 0!==e[i]&&""!==e[i]||delete e[i];var a=!1;if(o.config.useSendBeacon&&navigator.sendBeacon&&window.Blob){var r=t?"/evtTopic":"/evt",s=new Blob([JSON.stringify(e)],{type:"application/json",authorization:"Bearer "+o.config.apiKey});a=navigator.sendBeacon(o.config.baseURL+r+"?apikey="+o.config.apiKey,s)}if(!a){o.util.log("Sephora One Tag :: Using XHR for transport");var c=new XMLHttpRequest;c.onload=function(){c.status>=200&&c.status<300?o.util.log("Sephora One Tag :: Hit successfull!"):o.util.log("Sephone One Tag :: Hit failed.")},c.open("POST",o.config.baseURL+r+"?apikey="+o.config.apiKey,!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Authorization","Bearer "+o.config.apiKey),c.withCredentials=!0,c.send(JSON.stringify(e))}}},setAllowTracking:function(e,n){o.setConfig({allowTracking:e},n)},setUseSendBeacon:function(e,n){o.setConfig({useSendBeacon:e},n)},setDebug:function(e,n){o.setConfig({debug:e},n)},setBaseURL:function(e,n){o.setConfig({baseURL:e},n)},setApiKey:function(e,n){o.setConfig({apiKey:e},n)},setCookieSetTimeout:function(e,n){o.setConfig({cookieSetTimeout:e},n)}},function(){if("undefined"==typeof sephoraOneTag_cmds)var e=new o.commandQueue;else(e=new o.commandQueue).loadCmds(sephoraOneTag_cmds);window.sephoraOneTag_cmds=e,window.sephoraOneTag_cmds.process()}(),e.exports=o}},o={};function n(t){var i=o[t];if(void 0!==i)return i.exports;var a=o[t]={exports:{}};return e[t](a,a.exports,n),a.exports}n.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return n.d(o,{a:o}),o},n.d=(e,o)=>{for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{"use strict";n(380)})()})();